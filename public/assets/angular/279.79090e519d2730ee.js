"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[279],{8279:(J,p,l)=>{l.r(p),l.d(p,{AdminModule:()=>R});var d=l(6895),m=l(3599),e=l(1571);let v=(()=>{class n{constructor(t){this.router=t,"true"==sessionStorage.getItem("reloadneeded")&&(sessionStorage.setItem("reloadneeded","false"),window.location.reload())}logOut(){localStorage.clear(),sessionStorage.clear(),sessionStorage.setItem("reloadneeded","true"),this.router.navigate(["/login"]),window.location.reload()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["admin-index"]],decls:14,vars:0,consts:[["id","myTab","role","tablist",1,"nav","nav-tabs","sticky-top","bg-[#fff]"],["role","presentation",1,"nav-item"],["routerLink","users","routerLinkActive","active",1,"nav-link"],["routerLink","restaurantes","routerLinkActive","active",1,"nav-link"],["routerLink","reservas","routerLinkActive","active",1,"nav-link"],[1,"nav-item","ms-auto"],[1,"nav-link",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"ul",0)(1,"li",1)(2,"button",2),e._uU(3,"Usuarios"),e.qZA()(),e.TgZ(4,"li",1)(5,"button",3),e._uU(6,"Restaurantes"),e.qZA()(),e.TgZ(7,"li",1)(8,"button",4),e._uU(9,"Reservas"),e.qZA()(),e.TgZ(10,"li",5)(11,"button",6),e.NdJ("click",function(){return o.logOut()}),e._uU(12,"Logout"),e.qZA()()(),e._UZ(13,"router-outlet"))},dependencies:[m.lC,m.rH,m.Od]}),n})();var r=l(433),_=l(9837),g=l(7057);function Z(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"button",9),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw(),c=e.MAs(18);return s.editUser(i.id),e.KtG(s.open(c))}),e._uU(11,"Editar"),e.qZA()(),e.TgZ(12,"td")(13,"button",10),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.deleteUser(i.id))}),e._uU(14,"Eliminar"),e.qZA()()()}if(2&n){const t=u.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.rol),e.xp6(5),e.Q6J("disabled","admin@reservoo.com"===t.email)}}function q(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",11)(1,"h5",12),e._uU(2),e.qZA(),e.TgZ(3,"button",13),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return i.dismiss("Cross click"),e.KtG(s.closeModal())}),e.qZA()(),e.TgZ(4,"div",14)(5,"form",15)(6,"div",16)(7,"label",17),e._uU(8,"Nombre"),e.qZA(),e._UZ(9,"input",18),e.qZA(),e.TgZ(10,"div",16)(11,"label",17),e._uU(12,"Email"),e.qZA(),e._UZ(13,"input",19),e.qZA(),e.TgZ(14,"div",16)(15,"label",17),e._uU(16,"Contrase\xf1a"),e.qZA(),e._UZ(17,"input",20),e.qZA(),e.TgZ(18,"div",16)(19,"label",17),e._uU(20,"Rol"),e.qZA(),e.TgZ(21,"select",21)(22,"option",22),e._uU(23,"Elige rol"),e.qZA(),e.TgZ(24,"option",23),e._uU(25,"ADMIN"),e.qZA(),e.TgZ(26,"option",24),e._uU(27,"CLIENTE"),e.qZA(),e.TgZ(28,"option",25),e._uU(29,"EMPRESA"),e.qZA()()()()(),e.TgZ(30,"div",26)(31,"button",27),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return i.dismiss("Cross click"),e.KtG(s.closeModal())}),e._uU(32,"Cerrar"),e.qZA(),e.TgZ(33,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(""===a.editingId?a.postUser():a.putUser())}),e._uU(34),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij("",""===t.editingId?"A\xf1adir":"Editar"," Usuario"),e.xp6(3),e.Q6J("formGroup",t.userForm),e.xp6(17),e.Q6J("ngValue",null),e.xp6(12),e.Oqu(""===t.editingId?"A\xf1adir":"Editar")}}let h=(()=>{class n{ngOnInit(){this.userService.getUsers().subscribe(t=>{this.users=t}),this.userForm=this.fb.group({name:["",r.kI.required],email:["",[r.kI.required,r.kI.email]],pass:["",r.kI.required],rol:["",r.kI.required]})}constructor(t,o,a){this.fb=t,this.modalService=o,this.userService=a,this.users=[],this.editingId=""}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}closeModal(){this.editingId="",this.userForm=this.fb.group({name:["",r.kI.required],email:["",[r.kI.required,r.kI.email]],pass:["",r.kI.required],rol:["",r.kI.required]})}editUser(t){let o=this.users.find(a=>a.id===t);this.editingId=String(t),this.userForm=this.fb.group({name:[o?.name,r.kI.required],email:[o?.email,[r.kI.required,r.kI.email]],pass:["",r.kI.required],rol:[o?.rol,r.kI.required]})}postUser(){this.userService.postUser(this.userForm.getRawValue()).subscribe(t=>{console.log(t),window.location.reload()})}putUser(){this.userService.putUser(this.editingId,this.userForm.getRawValue()).subscribe(t=>{console.log(t),window.location.reload()})}deleteUser(t){this.userService.deleteUser(t).subscribe(o=>{console.log(o),window.location.reload()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(_.FF),e.Y36(g.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["admin-users"]],decls:19,vars:1,consts:[[1,"table","table-responsive"],[1,"table-borderless","mt-3","w-100"],[1,"bg-light"],["colspan","2"],[1,"btn","btn-success",3,"click"],[4,"ngFor","ngForOf"],[1,"modal","fade"],[1,"modal-dialog"],["content",""],["type","button",1,"btn","btn-primary",2,"background-color","var(--bs-primary) !important",3,"click"],["type","button",1,"btn","btn-danger",2,"background-color","var(--bs-danger) !important",3,"disabled","click"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["action","POST",3,"formGroup"],[1,"mb-3"],["for","name"],["type","text","name","name","id","name","placeholder","Nombre","formControlName","name",1,"form-control"],["type","email","name","email","id","email","placeholder","Email","formControlName","email",1,"form-control"],["type","password","name","pass","id","pass","placeholder","Contrase\xf1a","formControlName","pass",1,"form-control"],["formControlName","rol",1,"form-select"],["disabled","","hidden","","selected","",3,"ngValue"],["value","1"],["value","2"],["value","3"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,o){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"table",1)(2,"tr",2)(3,"td"),e._uU(4,"ID"),e.qZA(),e.TgZ(5,"td"),e._uU(6,"Email"),e.qZA(),e.TgZ(7,"td"),e._uU(8,"Nombre"),e.qZA(),e.TgZ(9,"td"),e._uU(10,"Rol"),e.qZA(),e.TgZ(11,"td",3)(12,"button",4),e.NdJ("click",function(){e.CHM(a);const s=e.MAs(18);return o.closeModal(),e.KtG(o.open(s))}),e._uU(13,"+ A\xf1adir"),e.qZA()()(),e.YNc(14,Z,15,5,"tr",5),e.qZA()(),e.TgZ(15,"div",6)(16,"div",7),e.YNc(17,q,35,4,"ng-template",null,8,e.W1O),e.qZA()()}2&t&&(e.xp6(14),e.Q6J("ngForOf",o.users))},dependencies:[d.sg,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u]}),n})();var f=l(8020);function k(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"slice"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td")(19,"button",9),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw(),c=e.MAs(26);return s.editRestaurant(i.id),e.KtG(s.open(c))}),e._uU(20,"Editar"),e.qZA()(),e.TgZ(21,"td")(22,"button",10),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.deleteRestaurant(i.id))}),e._uU(23,"Eliminar"),e.qZA()()()}if(2&n){const t=u.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.descripcion.length>15?e.Dn7(7,8,t.descripcion,0,15)+"...":t.descripcion),e.xp6(3),e.Oqu(t.aforo),e.xp6(2),e.Oqu(t.h_manana),e.xp6(2),e.Oqu(t.h_tarde),e.xp6(2),e.Oqu(t.direccion),e.xp6(2),e.Oqu(t.user.email)}}function U(n,u){if(1&n&&(e.TgZ(0,"option",44),e._uU(1),e.qZA()),2&n){const t=u.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.email)}}function C(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",11)(1,"h5",12),e._uU(2),e.qZA(),e.TgZ(3,"button",13),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return i.dismiss("Cross click"),e.KtG(s.closeModal())}),e.qZA()(),e.TgZ(4,"div",14)(5,"form",15)(6,"div",16)(7,"label",17),e._uU(8,"Nombre"),e.qZA(),e._UZ(9,"input",18),e.qZA(),e.TgZ(10,"div",16)(11,"label",19),e._uU(12,"Descripci\xf3n"),e.qZA(),e._UZ(13,"textarea",20),e.qZA(),e.TgZ(14,"div",16)(15,"label",21),e._uU(16,"Aforo"),e.qZA(),e._UZ(17,"input",22),e.qZA(),e.TgZ(18,"div",23)(19,"label",24),e._uU(20,"Horario ma\xf1ana"),e.qZA(),e.TgZ(21,"div",25),e._UZ(22,"input",26),e.TgZ(23,"span",27),e._uU(24,":"),e.qZA(),e._UZ(25,"input",28),e.TgZ(26,"span",29),e._uU(27,"-"),e.qZA(),e._UZ(28,"input",30),e.TgZ(29,"span",27),e._uU(30,":"),e.qZA(),e._UZ(31,"input",31),e.qZA()(),e.TgZ(32,"div",23)(33,"label",24),e._uU(34,"Horario tarde"),e.qZA(),e.TgZ(35,"div",25),e._UZ(36,"input",32),e.TgZ(37,"span",27),e._uU(38,":"),e.qZA(),e._UZ(39,"input",33),e.TgZ(40,"span",29),e._uU(41,"-"),e.qZA(),e._UZ(42,"input",34),e.TgZ(43,"span",27),e._uU(44,":"),e.qZA(),e._UZ(45,"input",35),e.qZA()(),e.TgZ(46,"div",16)(47,"label",36),e._uU(48,"Direcci\xf3n"),e.qZA(),e._UZ(49,"input",37),e.qZA(),e.TgZ(50,"div",16)(51,"label",17),e._uU(52,"Usuario"),e.qZA(),e.TgZ(53,"select",38)(54,"option",39),e._uU(55,"Elige usuario"),e.qZA(),e.YNc(56,U,2,2,"option",40),e.qZA()()()(),e.TgZ(57,"div",41)(58,"button",42),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return i.dismiss("Cross click"),e.KtG(s.closeModal())}),e._uU(59,"Cerrar"),e.qZA(),e.TgZ(60,"button",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(""===a.editingId?a.postRestaurant():a.putRestaurant())}),e._uU(61),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij("",""===t.editingId?"A\xf1adir":"Editar"," Restaurante"),e.xp6(3),e.Q6J("formGroup",t.userForm),e.xp6(49),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",t.usuariosEmpresarios),e.xp6(5),e.Oqu(""===t.editingId?"A\xf1adir":"Editar")}}let A=(()=>{class n{ngOnInit(){this.restaurantService.getRestaurants().subscribe(t=>{this.restaurantes=t}),this.userForm=this.fb.group({nombre:["",r.kI.required],descripcion:["",r.kI.required],aforo:["",[r.kI.required,r.kI.min(4)]],h_manana1_1:["",r.kI.required],h_manana1_2:["",r.kI.required],h_manana2_1:["",r.kI.required],h_manana2_2:["",r.kI.required],h_tarde1_1:["",r.kI.required],h_tarde1_2:["",r.kI.required],h_tarde2_1:["",r.kI.required],h_tarde2_2:["",r.kI.required],direccion:["",r.kI.required],idUsuario:["",r.kI.required]}),this.userService.getEmpresasUsers().subscribe(t=>{this.usuariosEmpresarios=t})}constructor(t,o,a,i){this.fb=t,this.modalService=o,this.restaurantService=a,this.userService=i,this.restaurantes=[],this.editingId="",this.usuariosEmpresarios=[]}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}closeModal(){this.editingId="",this.userForm=this.fb.group({nombre:["",r.kI.required],descripcion:["",r.kI.required],aforo:["",[r.kI.required,r.kI.min(4)]],h_manana1_1:["",r.kI.required],h_manana1_2:["",r.kI.required],h_manana2_1:["",r.kI.required],h_manana2_2:["",r.kI.required],h_tarde1_1:["",r.kI.required],h_tarde1_2:["",r.kI.required],h_tarde2_1:["",r.kI.required],h_tarde2_2:["",r.kI.required],direccion:["",r.kI.required],idUsuario:["",r.kI.required]})}log(t){console.log(t)}editRestaurant(t){let o=this.restaurantes.find(w=>w.id===t);this.editingId=String(t);let a=o?.h_manana.split("-")[0].split(":")[0],i=o?.h_manana.split("-")[0].split(":")[1],s=o?.h_manana.split("-")[1].split(":")[0],c=o?.h_manana.split("-")[1].split(":")[1],N=o?.h_tarde.split("-")[0].split(":")[0],M=o?.h_tarde.split("-")[0].split(":")[1],b=o?.h_tarde.split("-")[1].split(":")[0];o?.h_tarde.split("-")[1].split(":"),this.userForm=this.fb.group({nombre:[o?.nombre,r.kI.required],descripcion:[o?.descripcion,r.kI.required],aforo:[o?.aforo,[r.kI.required,r.kI.min(4)]],h_manana1_1:[a,r.kI.required],h_manana1_2:[i,r.kI.required],h_manana2_1:[s,r.kI.required],h_manana2_2:[c,r.kI.required],h_tarde1_1:[N,r.kI.required],h_tarde1_2:[M,r.kI.required],h_tarde2_1:[b,r.kI.required],h_tarde2_2:[b,r.kI.required],direccion:[o?.direccion,r.kI.required],idUsuario:[o?.user.id,r.kI.required]})}postRestaurant(){let t=`${this.userForm.get("h_manana1_1")?.value}:${this.userForm.get("h_manana1_2")?.value}-${this.userForm.get("h_manana2_1")?.value}:${this.userForm.get("h_manana2_2")?.value}`,o=`${this.userForm.get("h_tarde1_1")?.value}:${this.userForm.get("h_tarde1_2")?.value}-${this.userForm.get("h_tarde2_1")?.value}:${this.userForm.get("h_tarde2_2")?.value}`,a={nombre:this.userForm.get("nombre")?.value,descripcion:this.userForm.get("descripcion")?.value,aforo:this.userForm.get("aforo")?.value,h_manana:t,h_tarde:o,direccion:this.userForm.get("direccion")?.value,user:this.userForm.get("idUsuario")?.value};this.restaurantService.postRestaurant(a).subscribe(i=>{console.log(i),window.location.reload()})}putRestaurant(){let t=`${this.userForm.get("h_manana1_1")?.value}:${this.userForm.get("h_manana1_2")?.value}-${this.userForm.get("h_manana2_1")?.value}:${this.userForm.get("h_manana2_2")?.value}`,o=`${this.userForm.get("h_tarde1_1")?.value}:${this.userForm.get("h_tarde1_2")?.value}-${this.userForm.get("h_tarde2_1")?.value}:${this.userForm.get("h_tarde2_2")?.value}`,a={nombre:this.userForm.get("nombre")?.value,descripcion:this.userForm.get("descripcion")?.value,aforo:this.userForm.get("aforo")?.value,h_manana:t,h_tarde:o,direccion:this.userForm.get("direccion")?.value,user:this.userForm.get("idUsuario")?.value};this.restaurantService.putRestaurant(this.editingId,a).subscribe(i=>{console.log(i),window.location.reload()})}deleteRestaurant(t){this.restaurantService.deleteRestaurant(t).subscribe(o=>{console.log(o),window.location.reload()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(_.FF),e.Y36(f.d),e.Y36(g.R))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-restaurantes"]],decls:27,vars:1,consts:[[1,"table","table-responsive"],[1,"table-borderless","mt-3","w-100"],[1,"bg-light"],["colspan","2"],[1,"btn","btn-success",3,"click"],[4,"ngFor","ngForOf"],[1,"modal","fade"],[1,"modal-dialog"],["content",""],["type","button",1,"btn","btn-primary",2,"background-color","var(--bs-primary) !important",3,"click"],["type","button",1,"btn","btn-danger",2,"background-color","var(--bs-danger) !important",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["action","POST",3,"formGroup"],[1,"mb-3"],["for","name"],["type","text","name","name","id","name","placeholder","Nombre","formControlName","nombre",1,"form-control"],["for","desc"],["id","desc","placeholder","Descripci\xf3n","formControlName","descripcion",1,"form-control"],["for","aforo"],["type","number","name","aforo","id","aforo","placeholder","Aforo","formControlName","aforo",1,"form-control"],[1,"mb-3","d-flex","flex-column"],["for","h_manana1"],[1,"d-flex","justify-content-between"],["type","number","name","h_manana1_1","id","h_manana1_1","placeholder","00","formControlName","h_manana1_1",1,"form-control"],[1,"fs-4"],["type","number","name","h_manana1_2","id","h_manana1_2","placeholder","00","formControlName","h_manana1_2",1,"form-control"],[1,"text-center","fs-4"],["type","number","name","h_manana2_1","id","h_manana2_1","placeholder","00","formControlName","h_manana2_1",1,"form-control"],["type","number","name","h_manana2_2","id","h_manana2_2","placeholder","00","formControlName","h_manana2_2",1,"form-control"],["type","number","name","h_tarde1_1","id","h_tarde1_1","placeholder","00","formControlName","h_tarde1_1",1,"form-control"],["type","number","name","h_tarde1_2","id","h_tarde1_2","placeholder","00","formControlName","h_tarde1_2",1,"form-control"],["type","number","name","h_tarde2_1","id","h_tarde2_1","placeholder","00","formControlName","h_tarde2_1",1,"form-control"],["type","number","name","h_tarde2_2","id","h_tarde2_2","placeholder","00","formControlName","h_tarde2_2",1,"form-control"],["for","direccion"],["type","text","name","direccion","id","direccion","placeholder","Direcci\xf3n","formControlName","direccion",1,"form-control"],["formControlName","idUsuario",1,"form-select"],["disabled","","hidden","","selected","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(t,o){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"table",1)(2,"tr",2)(3,"td"),e._uU(4,"ID"),e.qZA(),e.TgZ(5,"td"),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"td"),e._uU(8,"Descripci\xf3n"),e.qZA(),e.TgZ(9,"td"),e._uU(10,"Aforo"),e.qZA(),e.TgZ(11,"td"),e._uU(12,"H. Ma\xf1ana"),e.qZA(),e.TgZ(13,"td"),e._uU(14,"H. Tarde"),e.qZA(),e.TgZ(15,"td"),e._uU(16,"Direcci\xf3n"),e.qZA(),e.TgZ(17,"td"),e._uU(18,"Email Usuario"),e.qZA(),e.TgZ(19,"td",3)(20,"button",4),e.NdJ("click",function(){e.CHM(a);const s=e.MAs(26);return o.closeModal(),e.KtG(o.open(s))}),e._uU(21,"+ A\xf1adir"),e.qZA()()(),e.YNc(22,k,24,12,"tr",5),e.qZA()(),e.TgZ(23,"div",6)(24,"div",7),e.YNc(25,C,62,5,"ng-template",null,8,e.W1O),e.qZA()()}2&t&&(e.xp6(22),e.Q6J("ngForOf",o.restaurantes))},dependencies:[d.sg,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.EJ,r.JJ,r.JL,r.sg,r.u,d.OU]}),n})();var T=l(8111);function x(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"td")(11,"div",9)(12,"input",10),e.NdJ("ngModelChange",function(a){const s=e.CHM(t).$implicit;return e.KtG(s.aprovada=a)})("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.confirmReservation(i.id,i.aprovada))}),e.qZA()()(),e.TgZ(13,"td")(14,"button",11),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw(),c=e.MAs(20);return s.edit(i.id),e.KtG(s.open(c))}),e._uU(15,"Editar"),e.qZA()(),e.TgZ(16,"td")(17,"button",12),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.deleteReservation(i.id))}),e._uU(18,"Eliminar"),e.qZA()()()}if(2&n){const t=u.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.user.email),e.xp6(2),e.Oqu(t.restaurante.nombre),e.xp6(2),e.Oqu(e.xi3(9,6,t.h_reserva,"dd/MM/yyyy H:mm")),e.xp6(4),e.Q6J("ngModel",t.aprovada)("checked",t.aprovada)}}function I(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"h5",14),e._uU(2),e.qZA(),e.TgZ(3,"button",15),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return i.dismiss("Cross click"),e.KtG(s.closeModal())}),e.qZA()(),e.TgZ(4,"div",16)(5,"form",17)(6,"div",18)(7,"label",19),e._uU(8,"Usuario que reserva"),e.qZA(),e._UZ(9,"input",20),e.qZA(),e.TgZ(10,"div",18)(11,"label",19),e._uU(12,"Restaurante al que reserva"),e.qZA(),e._UZ(13,"input",21),e.qZA(),e.TgZ(14,"div",18)(15,"label",19),e._uU(16,"Fecha y hora"),e.qZA(),e._UZ(17,"input",22),e.TgZ(18,"div",23),e._UZ(19,"input",24),e._uU(20,": "),e._UZ(21,"input",25),e.qZA()(),e.TgZ(22,"div",18)(23,"label",19),e._uU(24,"Confirmado"),e.qZA(),e._UZ(25,"input",26),e.qZA()()(),e.TgZ(26,"div",27)(27,"button",28),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw();return i.dismiss("Cross click"),e.KtG(s.closeModal())}),e._uU(28,"Cerrar"),e.qZA(),e.TgZ(29,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(""===a.editingId?a.postReservation():a.putReservation())}),e._uU(30),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij("",""===t.editingId?"A\xf1adir":"Editar"," Reserva"),e.xp6(3),e.Q6J("formGroup",t.userForm),e.xp6(25),e.Oqu(""===t.editingId?"A\xf1adir":"Editar")}}const F=[{path:"",component:v,children:[{path:"",component:h},{path:"users",component:h},{path:"restaurantes",component:A},{path:"reservas",component:(()=>{class n{ngOnInit(){this.reservationService.getReservations().subscribe(t=>{this.reservations=t}),this.userForm=this.fb.group({user:["",r.kI.required],restaurant:["",r.kI.required],date:[r.kI.required],hour:["",r.kI.required],min:[r.kI.required],aproved:[!1,r.kI.required]})}log(t){console.log("log")}constructor(t,o,a){this.fb=t,this.modalService=o,this.reservationService=a,this.reservations=[],this.editingId="",this.minDate=new Date}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}closeModal(){this.editingId="",this.userForm=this.fb.group({user:["",r.kI.required],restaurant:["",r.kI.required],date:[r.kI.required],hour:["",r.kI.required],min:[r.kI.required],aproved:[!1,r.kI.required]})}confirmReservation(t,o){this.reservationService.confirmReservation(t,!o).subscribe(a=>{console.log(a)})}edit(t){let o=this.reservations.find(i=>i.id===t);this.editingId=String(t);let a=new Date(String(o?.h_reserva));console.log(a,o?.h_reserva),this.userForm=this.fb.group({user:[o?.user.id,r.kI.required],restaurant:[o?.restaurante.id,r.kI.required],date:[(0,d.p6)(a,"yyyy-MM-dd","en"),r.kI.required],hour:[a.getHours(),r.kI.required],min:[a.getMinutes(),r.kI.required],aproved:[o?.aprovada,r.kI.required]})}postReservation(){let t=this.userForm.get("date")?.value+" "+this.userForm.get("hour")?.value+":"+this.userForm.get("min")?.value+":00",o={user:this.userForm.get("user")?.value,restaurant:this.userForm.get("restaurant")?.value,h_reserva:t,aprovado:this.userForm.get("aproved")?.value};this.reservationService.postReservation(o).subscribe(a=>{window.location.reload()})}putReservation(){let t=this.userForm.get("date")?.value+" "+this.userForm.get("hour")?.value+":"+this.userForm.get("min")?.value+":00",o={user:this.userForm.get("user")?.value,restaurant:this.userForm.get("restaurant")?.value,h_reserva:t,aprovado:this.userForm.get("aproved")?.value};this.reservationService.putReservation(this.editingId,o).subscribe(a=>{window.location.reload()})}deleteReservation(t){this.reservationService.deleteReservation(t).subscribe(o=>{window.location.reload()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(_.FF),e.Y36(T.a))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-reservas"]],decls:21,vars:1,consts:[[1,"table","table-responsive"],[1,"table-borderless","mt-3","w-100"],[1,"bg-light"],["colspan","2"],[1,"btn","btn-success",3,"click"],[4,"ngFor","ngForOf"],[1,"modal","fade"],[1,"modal-dialog"],["content",""],[1,"form-check","form-switch"],["type","checkbox",1,"form-check-input",3,"ngModel","checked","ngModelChange","click"],["type","button",1,"btn","btn-primary",2,"background-color","var(--bs-primary) !important",3,"click"],["type","button",1,"btn","btn-danger",2,"background-color","var(--bs-danger) !important",3,"click"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["action","POST",3,"formGroup"],[1,"mb-3"],["for","name"],["type","text","name","name","id","name","placeholder","Usuario","formControlName","user",1,"form-control"],["type","text","name","restaurant","id","restaurant","placeholder","Restaurante","formControlName","restaurant",1,"form-control"],["type","date","name","date","id","date","formControlName","date",1,"form-control"],[1,"d-flex"],["min","0","max","23","type","number","name","hour","id","hour","formControlName","hour",1,"form-control"],["min","0","max","59","type","number","name","min","id","min","formControlName","min",1,"form-control"],["type","checkbox","formControlName","aproved",1,"form-check-input"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,o){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"table",1)(2,"tr",2)(3,"td"),e._uU(4,"ID"),e.qZA(),e.TgZ(5,"td"),e._uU(6,"Email Usuario"),e.qZA(),e.TgZ(7,"td"),e._uU(8,"Nombre Restaurante"),e.qZA(),e.TgZ(9,"td"),e._uU(10,"Fecha y hora"),e.qZA(),e.TgZ(11,"td"),e._uU(12,"Confirmada"),e.qZA(),e.TgZ(13,"td",3)(14,"button",4),e.NdJ("click",function(){e.CHM(a);const s=e.MAs(20);return o.closeModal(),e.KtG(o.open(s))}),e._uU(15,"+ A\xf1adir"),e.qZA()()(),e.YNc(16,x,19,9,"tr",5),e.qZA()(),e.TgZ(17,"div",6)(18,"div",7),e.YNc(19,I,31,3,"ng-template",null,8,e.W1O),e.qZA()()}2&t&&(e.xp6(16),e.Q6J("ngForOf",o.reservations))},dependencies:[d.sg,r._Y,r.Fj,r.wV,r.Wl,r.JJ,r.JL,r.qQ,r.Fd,r.On,r.sg,r.u,d.uU]}),n})()}]}];let y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.Bz.forChild(F),m.Bz]}),n})(),R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.ez,y,r.u5,r.UX]}),n})()}}]);